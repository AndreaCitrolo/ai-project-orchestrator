#!/usr/bin/env claude-command
# Create Initiative
# Creates initiative with PRD, tasks, status

## DETERMINE ID

List `initiatives/` (or use 0001 if none)
Next ID = highest + 1 (4-digit zero-padded)

## ASK REQUIRED QUESTIONS

Ask ALL in single prompt:

**Core:**
1. Problem to solve?
2. Target modules from project-state.prd (1-2)?
3. User stories (3-5)?
4. Non-goals?

**Technical:**
5. Data/API requirements?
6. Dependencies (other initiatives)?
7. Tech stack?

**Behavior (MANDATORY):**
8. Testing: A) Unit 80%+ B) Unit+Integration 85%+ C) +E2E 90%+
9. Git: A) Branch per initiative B) Branch per task
10. Deployment: A) Manual B) CI/CD staging C) Full CI/CD
11. Agents: A) 1 B) 2 C) 3+

## CREATE: description.prd

File: `initiatives/[NNNN]-planned-[name]/description.prd`

```markdown
# Initiative: [Name]

**ID**: [NNNN]-planned-[name]
**Status**: planned
**Created**: [YYYY-MM-DD]

## References

**Project State**: project-state.prd
**Modules**: [list from Q2]

## Goals

[List from Q1,3]

## User Stories

[From Q3]

## Requirements

[Key requirements]

## Non-Goals

[From Q4]

## Technical

**Dependencies**: [From Q6]
**Tech Stack**: [From Q7]
**Data**: [From Q5]

## Behavior

**Testing**: [From Q8]
**Git**: [From Q9]
**Deployment**: [From Q10]
**Agents**: [From Q11]

## Acceptance Criteria

- [ ] [Criterion 1]
- [ ] [Criterion 2]
- [ ] [Criterion 3]
```

## CREATE: status.prd

File: `initiatives/[NNNN]-planned-[name]/status.prd`

```markdown
# Status: [Name]

**Initiative**: [NNNN]-planned-[name]
**Status**: planned
**Created**: [YYYY-MM-DD]

## Progress

Tasks: 0/0 (0%)
Status: Not started

## Notes

[YYYY-MM-DD] Created
```

## UPDATE/CREATE: INDEX.prd

File: `initiatives/INDEX.prd`

IF not exists, create:
```markdown
# Initiatives

## Active
(none)

## Planned
| ID | Name | Deps | Target |
|----|------|------|--------|
| [NNNN] | [name] | [deps] | [date] |

## Completed
(none)

## Cancelled
(none)
```

ELSE add to Planned section.

## OUTPUT

```
Initiative: [NNNN]-planned-[name]
Files: description.prd, status.prd
Next: Use ../templates/generate-tasks [NNNN]-planned-[name]
```

## VALIDATION

MUST verify:
- [ ] Sequential ID
- [ ] Directory: NNNN-planned-name
- [ ] description.prd created
- [ ] status.prd created
- [ ] INDEX.prd updated
- [ ] All Q1-11 answered
- [ ] Modules exist in project-state.prd
